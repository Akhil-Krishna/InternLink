{% extends "base.html" %}
{% block content %}

<div class="container py-4">
  <div class="card shadow-sm">
    <div class="card-body">
      <div class="d-flex flex-column flex-md-row align-items-center">
        <!-- Profile Picture -->
        <div class="me-md-4 text-center">
          <img src="{{ url_for('static', filename='uploads/images/' + (profile.profile_image if profile.profile_image else 'default_profile.png')) }}"
               class="img-thumbnail rounded-circle"
               style="width: 150px; height: 150px; object-fit: cover;">
        </div>

        <!-- Basic Info -->
        <div class="flex-fill">
          <h4 class="mb-1">{{ profile.full_name }}</h4>
          <p class="mb-0"><strong>Username:</strong> {{ profile.username }}</p>
          <p class="mb-0"><strong>Email:</strong> {{ profile.email }}</p>
          <p class="mb-0"><strong>Role:</strong> {{ role|capitalize }}</p>
          <p class="mb-0"><strong>Status:</strong> Active</p>
        </div>

        <!-- Edit Button -->
        {% if not readonly %}
        <!-- Edit Button -->
        <div class="mt-3 mt-md-0">
            <a href="{{ url_for('edit_profile') }}" class="btn btn-outline-primary">Edit Profile</a>
        </div>
        {% endif %}

      </div>
    </div>
  </div>

  <!-- Role-specific fields -->
  <div class="row mt-4">
    {% if role == 'student' %}
    <div class="col-md-6">
      <div class="card shadow-sm mb-3">
        <div class="card-body">
          <h5 class="card-title">Education</h5>
          <p class="mb-1"><strong>University:</strong> {{ profile.university }}</p>
          <p class="mb-1"><strong>Course:</strong> {{ profile.course }}</p>
          {% if profile.resume_path %}
          <p><strong>Resume:</strong>
            <a class="btn btn-sm btn-outline-secondary" target="_blank"
               href="{{ url_for('static', filename='uploads/resumes/' + profile.resume_path) }}">View</a>
          </p>
          {% endif %}
        </div>
      </div>
    </div>

    {% elif role == 'employer' %}
    <div class="col-md-6">
      <div class="card shadow-sm mb-3">
        <div class="card-body">
          <h5 class="card-title">Company Info</h5>
          <p class="mb-1"><strong>Company Name:</strong> {{ profile.company_name }}</p>
          <p class="mb-1"><strong>Website:</strong>
            <a href="{{ profile.website }}" target="_blank">{{ profile.website }}</a>
          </p>
          <p class="mb-1"><strong>Company Description:</strong> {{ profile.company_description }}</p>
          <p class="mb-1"><strong>Company Logo:</strong></p>
          <img src="{{ url_for('static', filename='uploads/images/' + (profile.logo_path if profile.logo_path else 'default_logo.png')) }}"
               class="img-fluid border rounded"
               style="max-height: 120px;">
        </div>
      </div>
    </div>
    {% endif %}
  </div>
</div>

{% endblock %}
